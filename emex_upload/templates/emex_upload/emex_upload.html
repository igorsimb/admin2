{% extends "core/layouts/blank.html" %}
{% block title %}–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö Emex{% endblock %}

{% block content %}
<div class="container mx-auto p-4 md:p-6">

    <div class="text-sm breadcrumbs mb-6">
        <ul>
            <li><a href="{% url 'index' %}" class="text-primary">–ì–ª–∞–≤–Ω–∞—è</a></li>
            <li class="text-gray-500">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö Emex</li>
        </ul>
    </div>

    {% if messages %}
    <div class="space-y-2 mb-6">
        {% for message in messages %}
        <div role="alert" class="alert {% if message.tags == 'success' %}alert-success{% elif message.tags == 'warning' %}alert-warning{% elif message.tags == 'error' %}alert-error{% else %}alert-info{% endif %} shadow-md">
            <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
                {% if message.tags == 'success' %}
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                {% elif message.tags == 'error' or message.tags == 'warning' %}
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                {% else %}
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                {% endif %}
            </svg>
            <span>{{ message }}</span>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <div class="card-body items-center text-center p-0">
        <h2 class="card-title text-2xl font-bold mb-4">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö Emex</h2>
        <p class="mb-6 text-base-content/60">–í—ã–±–µ—Ä–∏—Ç–µ üìÑ txt-—Ñ–∞–π–ª –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–º–∞–∫—Å. —Ä–∞–∑–º–µ—Ä 1GB).</p>

        <form action="{% url 'emex_upload:upload' %}" method="post" enctype="multipart/form-data" class="w-full max-w-md" id="upload-form">
            {% csrf_token %}
            <div class="form-control w-full">
                {{ form.file }}
            </div>

            <div class="card-actions justify-center mt-6">
                <button id="upload-btn" type="submit" class="btn btn-primary w-full">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª</button>
            </div>
            <div id="loading-text" class="mt-4 hidden text-gray-500">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </form>

        <div class="collapse bg-base-200 border-base-300 border mt-6 w-full max-w-md hover:bg-base-300 transition-colors duration-200">
            <input type="checkbox" />
            <div class="collapse-title font-semibold hover:bg-base-300 transition-colors duration-200">
                ‚ñ∏ –û–∂–∏–¥–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç txt-—Ñ–∞–π–ª–∞
            </div>
            <div class="collapse-content text-sm overflow-x-auto text-left">
<pre>
–î–∞—Ç–∞                –ê—Ä—Ç             –ë—Ä–µ–Ω–¥   –õ–æ–≥–æ–ü–æ—Å—Ç–∞–≤—â–∏–∫–∞  –õ–æ–≥–æ–ü—Ä–∞–π—Å–∞  –ò–ù–ù–ü–æ—Å—Ç–∞–≤—â–∏–∫–∞   –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–ü–æ—Å—Ç–∞–≤—â–∏–∫–∞   –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ  –¶–µ–Ω–∞–ü–æ–∫—É–ø–∫–∏ –°—É–º–º–∞–ü–æ–∫—É–ø–∫–∏    –¶–µ–Ω–∞–ü—Ä–æ–¥–∞–∂–∏ –°—É–º–º–∞–ü—Ä–æ–¥–∞–∂–∏    –°–∫–ª–∞–¥   –õ–æ–≥–æ–ö–ª–∏–µ–Ω—Ç–∞ –ò–ù–ù–ö–ª–∏–µ–Ω—Ç–∞  –ù–∞–∑–≤–∞–Ω–∏–µ–ö–ª–∏–µ–Ω—Ç–∞
2025-11-01 00:01:13 3000628         Metaco  JNJQ            JNJQ        7714898801      –û–û–û –Æ–†–ê–õ                1           3385,49     3385,49         3637,2      3637,2          –î–ê      MOS3        7735581530  –û–û–û –ï–ú–ï–•-–∞–≤—Ç–æ
2025-11-01 00:01:13 44111C6RLDEM2   Depo    TDVN            TDVV        5027256859      –û–û–û –ü–ê–†–ï–¢–û–ü–ê–†–¢–°         1           7705,61     7705,61         8269,8      8269,8          –î–ê      MOS3        7735581530  –û–û–û –ï–ú–ï–•-–∞–≤—Ç–æ
2025-11-01 00:01:13 44111G6LMLDEM2  Depo    KRTN            KRTW        7721844807      –û–û–û –ê.–ü.–†.              1           8847,89     8847,89         9493,2      9493,2          –î–ê      MOS3        7735581530  –û–û–û –ï–ú–ï–•-–∞–≤—Ç–æ
2025-11-01 00:01:13 4412038LUE      Depo    MART            MART        7720749068      –û–û–û –®–ê–¢–ï-–ú –ü–õ–Æ–°         1           2062,58     2062,58         2220        2220            –î–ê      MOS3        7735581530  –û–û–û –ï–ú–ï–•-–∞–≤—Ç–æ
</pre>
            </div>
        </div>
    </div>
</div>

<script>
document.getElementById("upload-form").addEventListener("submit", function() {
    const btn = document.getElementById("upload-btn");
    const loading = document.getElementById("loading-text");
    btn.disabled = true;
    btn.textContent = "–ó–∞–≥—Ä—É–∑–∫–∞...";
    loading.classList.remove("hidden");
});
</script>
{% endblock %}
